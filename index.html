<!DOCTYPE html>
<html>
<head>
<title>
Netlify Trial
</title>
<script>
var pieceSide = 60;


function createGameBoard()
{
var chessPieces = ["R", "N", "B", "Q", "K", "B", "N", "R"],
boardStr = "<table id='GameSquare'>";

for (let i=0; i<8; i++) {
   boardStr += "<tr>";
   for (let j=0; j<8; j++) {
      if ((i+j)%2) boardStr += "<td bgcolor=#08A7B3";
      else boardStr += "<td bgcolor=#F8F7E3";
      boardStr +=" onClick='squareClick(event)'>";
      
      if ((i<2)||(i>5)) {
         if (i==1) boardStr += "<img src='./Pieces/Black/P.png'";
         else if (i==6) boardStr += "<img src='./Pieces/White/P.png'";
         else if (i==0) boardStr += "<img src='./Pieces/Black/";
         else if (i==7) boardStr += "<img src='./Pieces/White/";
         
         if ((i==0)||(i==7)) {
            boardStr += chessPieces[j] + ".png' alt='White king'";
         }
         
         boardStr += " height=" + pieceSide.toString() + " width=" + pieceSide.toString() + ">";
         boardStr += "</td>";
         continue;
      } else {
         boardStr += "<img src='./Pieces/Empty.png'";
         boardStr += " height=" + pieceSide.toString() + " width=" + pieceSide.toString() + ">";
         boardStr += "</td>";
      }
   }
   boardStr += "</tr>";
}
boardStr += "</table>";
document.getElementById("GameBoard").innerHTML = boardStr;
}


function squareClick(event/*,col*/)
{
let element = event.target,
leftWall = document.getElementById("GameSquare").getBoundingClientRect().left,
horizShift = pieceSide + 5.0, verticShift = pieceSide + 7.0,
sideHitSpan = pieceSide - 2.0;
rightWall = leftWall + sideHitSpan, colNbr = -1, rowNbr = -1,
topWall = document.getElementById("GameSquare").getBoundingClientRect().top + 12.0,
bottomWall = topWall + sideHitSpan;

for (let i=0; i<8; i++) {
   if ((event.clientX>leftWall)&&(event.clientX<rightWall)) {
      colNbr = i;
      
      for (let j=0; j<8; j++) {
         if ((event.clientY>topWall)&&(event.clientY<bottomWall)) {
            rowNbr = j;
            break;
         }
         
         topWall += verticShift;
         bottomWall = topWall + sideHitSpan;
      }
      
      break;
   }
   
   leftWall += horizShift;
   rightWall = leftWall + sideHitSpan;
}

var displayString = 'W:' + event.which + ' B:' + event.button;
displayString += ' X:' + event.clientX + ' Y:' + event.clientY;

displayString += ' GBL: ' + document.getElementById("GameSquare").getBoundingClientRect().left;
displayString += ' GBR: ' + document.getElementById("GameSquare").getBoundingClientRect().right;
displayString += ' GBT: ' + document.getElementById("GameSquare").getBoundingClientRect().top;
displayString += ' GBB: ' + document.getElementById("GameSquare").getBoundingClientRect().bottom;
displayString += ' colNbr= ' + colNbr.toString();
displayString += ' rowNbr= ' + rowNbr.toString();

document.getElementById("ClickPanel").innerHTML = displayString;
}
</script>
</head>
<body>
<center>
<br/>
<p id="ClickPanel"></p>
<p id="GameBoard"></p>
<script>
createGameBoard();
</script>
</center>
</body>
</html>
